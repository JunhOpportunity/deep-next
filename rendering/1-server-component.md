# 서버 컴포넌트

> 서버에서 렌더링하고 선택적으로 캐시할 수 있는 UI를 작성 (Next는 기본적으로 서버 컴포넌트에서 작동한다.)
> 

## 서버 렌더링의 이점

- 데이터 가져오기 : 렌더링에 필요한 데이터를 가져오는 데 걸리는 시간을 줄일 수 있다.
- 보안 : 클라이언트에서 데이터를 노출할 위험이 없기 때문에 안전하다.
- 캐싱 : 성능 향상으로 비용이 절감된다.
- 초기 페이지 빠르게 생성 : 사용자가 즉시 페이지를 볼 수 있도록 HTML을 생성한다.
- SEO 최적화 : 렌더링이 완료된 HTML은 검색 엔진을 통해 탐색이 가능해지므로 SEO 최적화가 가능해진다.
- 스트리밍 : 사용자가 모든 페이지가 렌더링 될 때까지 기다리지 않고 일부를 먼저 보여줄 수 있다.

## 서버 컴포넌트의 렌더링 방식

1. [서버에서 HTML 렌더링] React Server Component Payload(RSC Payload) 및 클라이언트 컴포넌트 JS 지침을 사용하여 서버에서 HTML을 렌더링 한다. 
(RSC Payload는 클라이언트와 서버 컴포넌트 트리를 조정하고 DOM을 업데이트하는 데 사용된다.)
2. [클라이언트에서 HTML 표시] 클라이언트에서 HTML을 반응형이 아닌 형식으로 미리보기를 즉시 표시한다.
3. [하이드레이션] 하이드레이션을 통해 클라이언트 컴포넌트를 반응형으로 만든다.

## 서버 렌더링 전략

### 1. 정적 렌더링

### 2. 동적 렌더링

- 렌더링 하는 동안 동적 기능이나 캐시되지 않은 데이터 요청이 발견되면 동적으로 렌더링하도록 전환한다. 즉, 완전히 정적으로 렌더링되려면 모든 데이터가 캐시되어 있어야 한다.
- 동적 함수인 `cookies()` `headers()` `useSearchParams()` `searchParams`  를 사용하면 동적으로 렌더링된다.

### 3. 스트리밍

- 스트리밍을 사용하면 서버에서 UI를 여러 단위로 분할되어서 클라이언트로 전송되기 때문에 사용자가 모든 렌더링을 기다리지 않고 일부를 즉시 볼 수 있게된다.