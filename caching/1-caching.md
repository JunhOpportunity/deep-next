# Caching

> 렌더링 작업과 데이터 요청을 캐싱하여 어플리케이션 성능을 향상시키고 비용을 절감할 수 잇다
> 

NextJS는 성능을 향상하고 비용을 줄이기 위해 가능한 한 많이 캐시한다.
기본적인 옵션이기 때문에 따로 설정하지 않는 이상 정적 렌더링 & 데이터 캐싱이 된다는 것이다.

| Mechanism | What | Where | Purpose | Duration |
| --- | --- | --- | --- | --- |
| 메모이제이션 | 함수의 반환 값 | 섬기는 사람 | React 구성 요소 트리에서 데이터 재사용 | 요청별 수명 주기 |
| 데이터 캐시 | 데이터 | 섬기는 사람 | 사용자 요청 및 배포 전반에 걸쳐 데이터 저장 | 지속 (재검증 전까지) |
| 전체 경로 캐시 | HTML 과 RSC payload | 섬기는 사람 | 렌더링 비용 절감 및 성능 향상 | 지속 (재검증 전까지) |
| 라우터 캐시 | RSC payload | 고객 | 탐색 시 서버 요청 줄이기 | 사용자 세션 또는 시간 기반 |

## 메모이제이션

> 요청 결과를 메모했다가 동일한 요청에 대해서 재사용하는 것
> 

### 작동 방식

1. 처음 렌더링 시 함수 실행 결과가 메모리에 저장 (cache: MISS)
2. 동일한 경로로 요청된 경우 함수를 실행하지 않고 메모리에서 결과 반환 (cache: HIT)

### 주의 사항

※ 메모이제이션은 Next 기능이 아닌 React 기능이다.

※ 메모이제이션은 React 컴포넌트 트리에만 적용된다.

## 데이터 캐시

> **서버 요청** 및 **배포** 데이터 결과를 유지하는 내장 데이터 캐시
> 
- Fetch 요청은 기본적으로 캐시 된다.
- 데이터 캐시는 재검증하거나 선택 해제하지 않는 한 지속된다.

### 작동 방식

1. 처음 Fetch 요청이 발생하면 Data Cache 에서 캐시를 확인
2. Data Cache 에 캐시된 응답이 없다면 데이터 요청
3. 받아온 데이터를 Data Cache 에 저장 후 메모